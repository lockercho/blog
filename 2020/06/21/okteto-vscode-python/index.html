<!DOCTYPE html><html lang="zh-tw"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="Pei-Ya Chiu"><link rel="icon" href="/blog/favicon/favicon.ico"><title>PY éƒ¨è½æ ¼</title><meta name="description" content=""><link rel="alternate" type="application/rss+xml" title="PY éƒ¨è½æ ¼" href="/blog/atom.xml"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"><link rel="stylesheet" href="/blog/css/main.css"><link rel="stylesheet" href="/blog/css/highlight.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><meta name="generator" content="Hexo 4.2.1"></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/blog/" class="navbar-brand">PY éƒ¨è½æ ¼</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/blog/archives">Archive</a></li><li><a href="/blog/about/">About</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/blog/"><img src="/blog/ellie.jpg" class="avatar-img"></a></div></div></div></nav><header class="header-section"><div class="intro-header no-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>ä½¿ç”¨ VS Code + Oketo åœ¨ Kubernetes é ç«¯é–‹ç™¼ - ä»¥ Python ç‚ºä¾‹</h1><p class="post-meta">Posted on 6æœˆ 21 2020</p></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role="main" class="blog-post"><p>æœ¬æ–‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ VS Code ä¸Šçš„ <a href="https://marketplace.visualstudio.com/items?itemName=okteto.remote-kubernetes" target="_blank" rel="noopener">Remote - Kubernetes</a> (Okteto) æ’ä»¶ä¾†åœ¨ K8S Cluster å…§é ç«¯é–‹ç™¼ Python applicationã€‚</p>
<p>ï¼ˆæœ¬æ–‡çš„ç¯„ä¾‹ç¨‹å¼ç¢¼ä¹Ÿå¯ä»¥åœ¨ GitHub æ‰¾åˆ°ï¼š<a href="https://github.com/lockercho/okteto-python-example" target="_blank" rel="noopener">https://github.com/lockercho/okteto-python-example</a> ï¼‰</p>
<h2 id="Okteto-ä»‹ç´¹"><a class="header-anchor" href="#Okteto-ä»‹ç´¹"></a>Okteto ä»‹ç´¹</h2>
<p>Okteto é€™å€‹å·¥å…·æœƒå¹«ä½ åœ¨ Kubernetes è¨­å®šå¥½é–‹ç™¼ç”¨çš„ deploymentã€åŒæ­¥æª”æ¡ˆè‡³é ç«¯ã€ä»¥åŠè¨­å®šå®Œæˆå¾Œè‡ªå‹•é–‹å•Ÿ Remote-SSH é€£ç·šè‡³é ç«¯ç’°å¢ƒã€‚</p>
<h2 id="ç‚ºä»€éº¼è¦ä½¿ç”¨é ç«¯é–‹ç™¼ï¼Ÿ"><a class="header-anchor" href="#ç‚ºä»€éº¼è¦ä½¿ç”¨é ç«¯é–‹ç™¼ï¼Ÿ"></a>ç‚ºä»€éº¼è¦ä½¿ç”¨é ç«¯é–‹ç™¼ï¼Ÿ</h2>
<p>å‡è¨­ä½¿ç”¨é€™å€‹é–‹ç™¼ä¸­çš„ application æœªä¾†ä¹Ÿæœƒ deploy åœ¨ k8s cluster ä¸Šï¼Œé ç«¯é–‹ç™¼å¯ä»¥æä¾›ä»¥ä¸‹å¥½è™•ï¼š</p>
<ul>
<li>ä¸ç”¨å†å¤šæº–å‚™ä¸€ä»½å·®å¾ˆå¤§ local configï¼šåœ¨é–‹ç™¼æ™‚å¯ä»¥ç›´æ¥ä½¿ç”¨ cluster configï¼ˆå„˜ç®¡é€™ä»½ config å¯èƒ½æ˜¯ dev ç’°å¢ƒçš„ï¼Œé€šå¸¸ä¹Ÿæœƒæ¯” local config æ›´æ¥è¿‘ production ç’°å¢ƒï¼‰ã€‚</li>
<li>è‹¥é–‹ç™¼çš„ application ä¾è³´æ–¼ k8s å…§çš„å¤šå€‹å…¶ä»– serviceï¼Œç›´æ¥åœ¨ cluster å…§é–‹ç™¼å¯ä»¥çœå»å¾ˆå¤šé¡å¤–çš„ port forward è¨­å®šã€‚</li>
<li>é‚ªæƒ¡ debug ä¹‹è¡“ ğŸ˜ˆï¼šè‹¥ä½¿ç”¨é‹è¡Œä¸­çš„ deployment çš„åç¨±ä¾†å»ºç«‹ç’°å¢ƒï¼Œå‰‡ Okteto æœƒæš«æ™‚å–ä»£æ‰åŸæœ¬çš„ deploymentï¼Œé–‹ç™¼çµæŸæ‰æ›å›ä¾†ï¼ˆåƒè¬åˆ¥ç”¨åœ¨ production ç’°å¢ƒï¼Œé™¤éä½ ç™¾åˆ†ä¹‹å…©å„„çŸ¥é“è‡ªå·±åœ¨åšä»€éº¼ã€‚)</li>
</ul>
<p>æ¥ä¸‹ä¾†å°±é–‹å§‹æ‰‹æŠŠæ‰‹è¬›è§£å¦‚ä½•å»ºç«‹ä¸€å€‹ Kubernetes å…§é–‹ç™¼ç’°å¢ƒã€‚</p>
<h2 id="è¨­å®šæµç¨‹"><a class="header-anchor" href="#è¨­å®šæµç¨‹"></a>è¨­å®šæµç¨‹</h2>
<h3 id="Step-1-æº–å‚™ä¸€å€‹-K8S-Cluster"><a class="header-anchor" href="#Step-1-æº–å‚™ä¸€å€‹-K8S-Cluster"></a>Step 1: æº–å‚™ä¸€å€‹ K8S Cluster</h3>
<p>è¦è¨­å®š K8S é ç«¯é–‹ç™¼ï¼Œé¦–å…ˆè¦æº–å‚™ä¸€å€‹ä½ æœ‰æ¬Šé™è·‘ <code>kubectl apply</code> çš„ K8S clusterã€‚</p>
<p>å¦‚æœæ²’æœ‰çš„è©±ï¼Œ<a href="https://cloud.okteto.com/#/login" target="_blank" rel="noopener">Okteto Cloud</a> æä¾›äº†å…è²»çš„ cluster å¯ä»¥ä½¿ç”¨ï¼Œåªè¦ä½¿ç”¨ GitHub å¸³è™Ÿè¨»å†Šå³å¯ã€‚ï¼ˆæœ¬æ–‡æ˜¯ä½¿ç”¨ Mac OS X ä¸Šçš„ Docker Desktop å…§å»ºçš„ Kubernetesï¼‰</p>
<h3 id="Step-2-å®‰è£-VS-Code-çš„-Remote-Kubernetes-Extension"><a class="header-anchor" href="#Step-2-å®‰è£-VS-Code-çš„-Remote-Kubernetes-Extension"></a>Step 2: å®‰è£ VS Code çš„ Remote - Kubernetes Extension</h3>
<p><a href="https://marketplace.visualstudio.com/items?itemName=okteto.remote-kubernetes" target="_blank" rel="noopener">Remote - Kubernetes</a></p>
<h3 id="Step-3-è¨­å®š-Okteto-yaml"><a class="header-anchor" href="#Step-3-è¨­å®š-Okteto-yaml"></a>Step 3: è¨­å®š Okteto.yaml</h3>
<p>å‡è¨­ç¾åœ¨åœ¨é–‹ç™¼ä¸€å€‹ Python çš„ hello-world å°ˆæ¡ˆï¼Œä½ éœ€è¦å»ºç«‹ä¸€å€‹ <code>hello-world/okteto.yml</code> æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># name æœƒæ˜¯é–‹ç™¼ç”¨çš„ deployment name</span><br><span class="line">name: hello-world</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ Okteto æä¾›çš„ Python Image</span><br><span class="line">image: okteto&#x2F;python:3-dev</span><br><span class="line"></span><br><span class="line">command: [&quot;bash&quot;]</span><br><span class="line"></span><br><span class="line"># Source Code æœƒè¢«åŒæ­¥è‡³é€™å€‹ dir</span><br><span class="line">workdir: &quot;&#x2F;opt&#x2F;src&#x2F;&quot;</span><br><span class="line"></span><br><span class="line"># è¨­å®šå°‡é ç«¯ port 5000 forward åˆ°æœ¬æ©Ÿ port 25000ï¼Œç­‰ç­‰æœƒç”¨åˆ°</span><br><span class="line">forward:</span><br><span class="line">  - 25000:5000</span><br></pre></td></tr></table></figure>
<h3 id="Step-3-å•Ÿå‹•é ç«¯é–‹ç™¼ç’°å¢ƒ"><a class="header-anchor" href="#Step-3-å•Ÿå‹•é ç«¯é–‹ç™¼ç’°å¢ƒ"></a>Step 3: å•Ÿå‹•é ç«¯é–‹ç™¼ç’°å¢ƒ</h3>
<p>æ¥è‘— Cmd + Shift + p é–‹å•Ÿ Command Palette ä½¿ç”¨ <code>Okteto: Up</code></p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/okteto-up.png" width="400px" title="Okteto Starting...">
</div>
<p>å†é¸æ“‡ä½ å‰›å‰›å»ºç«‹çš„ <code>hello-world/okteto.yaml</code> è¨­å®šæª”ã€‚</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/okteto-select-manifest.png" width="400px" title="Okteto Starting...">
</div>
<br/>
é¸å®Œè¨­å®šæª”å¾Œ VS Code å³ä¸‹è§’æœƒè·³å‡ºæç¤ºæ­£åœ¨æº–å‚™ä½ çš„ Remote é–‹ç™¼ç’°å¢ƒï¼š
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/okteto-starting.png" width="400px" title="Okteto Starting...">
</div>
<p>ç’°å¢ƒå»ºç«‹å¥½å¾Œ terminal æœƒé¡¯ç¤ºä»¥ä¸‹è¨Šæ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> âœ“  Development container activated</span><br><span class="line"> âœ“  Files synchronized</span><br><span class="line">    Namespace: default</span><br><span class="line">    Name:      python-okteto-sample</span><br><span class="line">    SSH:       22100 -&gt; 2222</span><br><span class="line">    Forward:   25000 -&gt; 5000</span><br><span class="line"></span><br><span class="line">Welcome to your development environment. Happy coding!</span><br><span class="line">okteto&gt;</span><br></pre></td></tr></table></figure>
<p>åŒæ™‚ VS Code æœƒé–‹å•Ÿä¸€å€‹æ–°çš„è¦–çª—ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢ä¸­é–“çš„æ¨™é¡Œèˆ‡å·¦ä¸‹ç‹€æ…‹éƒ½æœ‰æ¨™è¨˜ [SSH: XXX.okteto] ä»£è¡¨é€™å€‹è¦–çª—æ˜¯é ç«¯ç’°å¢ƒï¼š</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/vscode-remote-welcome.png" width="800px" title="Okteto Starting...">
</div>
<h3 id="Step-4-è¨­å®š-Python-ç’°å¢ƒ"><a class="header-anchor" href="#Step-4-è¨­å®š-Python-ç’°å¢ƒ"></a>Step 4: è¨­å®š Python ç’°å¢ƒ</h3>
<p>ç”±æ–¼é€™å€‹é ç«¯æ˜¯ä¸€å€‹ä¹¾æ·¨ç’°å¢ƒï¼Œæ‰€ä»¥éœ€è¦é‡æ–°å®‰è£ Python é–‹ç™¼å¥—ä»¶ä¸¦ reloadã€‚</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/vscode-install-python-small.png" width="400px" title="Okteto Starting...">
</div>
<p>æ¥è‘—é¸æ“‡ Debugger è¦ä½¿ç”¨çš„ Python Interpreterï¼ŒOkteto é è¨­æœƒå¹«ä½ é–‹ä¸€å€‹ python <code>venv</code> è³‡æ–™å¤¾ï¼Œä½†å¦‚æœåœ¨ TERMINAL ä¸‹ <code>which python</code> æœƒç™¼ç¾æ˜¯ä½¿ç”¨ <code>/usr/local/bin/python</code> è€Œé <code>venv/bin/python</code>ã€‚é€™é‚Šç‚ºäº†è®“ debugger æ–¹ä¾¿æŠ“åˆ° pip å®‰è£çš„å¥—ä»¶ï¼Œæˆ‘ç›´æ¥æŠŠ Interpreter è¨­å®šç‚º <code>/usr/local/bin/python</code>ã€‚</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/vscode-select-interpreter.png" width="800px" title="VS Code: select interpreter">
</div>
<br>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/vscode-select-python-version.png" width="800px" title="VS Code: select interpreter">
</div>
<p>æ¥è‘—ä½¿ç”¨ <code>Cmd +j</code> å«å‡º VS Code TERMINALï¼Œè·‘ <code>pip install Flask==1.1.2</code> å®‰è£ Flask</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/flask-install.png" width="800px" title="Install flask">
</div>
<h3 id="Step-5-å»ºç«‹æ¸¬è©¦ç”¨çš„-Python-application"><a class="header-anchor" href="#Step-5-å»ºç«‹æ¸¬è©¦ç”¨çš„-Python-application"></a>Step 5: å»ºç«‹æ¸¬è©¦ç”¨çš„ Python application</h3>
<p>æ¥ä¸‹ä¾†ç”¨ Flask å»ºç«‹ä¸€å€‹ç°¡å–®çš„æ¸¬è©¦ appã€‚</p>
<p>å»ºç«‹ <code>app.py</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># app.py</span><br><span class="line"></span><br><span class="line">from flask import Flask</span><br><span class="line"></span><br><span class="line">app &#x3D; Flask(__name__)</span><br><span class="line"></span><br><span class="line">@app.route(&quot;&#x2F;hello&quot;)</span><br><span class="line">def hello():</span><br><span class="line">    return &quot;World!&quot;</span><br></pre></td></tr></table></figure>
<p>å»ºç«‹ <code>.vscode/launch.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Python: Flask&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;python&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;module&quot;: &quot;flask&quot;,</span><br><span class="line">            &quot;env&quot;: &#123;</span><br><span class="line">                &quot;FLASK_APP&quot;: &quot;app.py&quot;,</span><br><span class="line">                &quot;FLASK_ENV&quot;: &quot;development&quot;,</span><br><span class="line">                &quot;FLASK_DEBUG&quot;: &quot;0&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;args&quot;: [</span><br><span class="line">                &quot;run&quot;,</span><br><span class="line">                &quot;--no-debugger&quot;,</span><br><span class="line">                &quot;--no-reload&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¨­å®šå®Œäº†å°±å¯ä»¥ä½¿ç”¨ VS Code menu çš„ <code>Run -&gt; Start Debugging</code> æˆ– <code>F5</code> é–‹å§‹ debugã€‚<br>
æ­¤æ™‚å¯ä»¥é †ä¾¿åœ¨ <code>line 7</code> è¨­å®šä¸€å€‹æ¸¬è©¦ç”¨çš„ä¸­æ–·é»ï¼š</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/python-run-success.png" width="800px" title="Install flask">
</div>
<p>ç”±æ–¼ä¸€é–‹å§‹æœ‰è¨­å®šäº† Okteto æŠŠ remote çš„ <code>5000</code> port forward åˆ°æœ¬æ©Ÿçš„ <code>25000</code> portï¼Œç¾åœ¨å¯ä»¥å¾ <code>localhost:25000</code> æ¸¬è©¦å‰›å‰›å¯«çš„ <code>/hello</code> é€™å€‹ APIï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl http:&#x2F;&#x2F;localhost:25000&#x2F;hello</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‰›å‰›è¨­å®šäº†ä¸­æ–·é»ï¼Œæ‡‰è©²æœƒç™¼ç¾é€™å€‹ curl ä¸æœƒ returnã€‚åˆ‡å› remote VS Code è¦–çª—æœƒç™¼ç¾ä¸­æ–·é»è¢«æˆåŠŸè§¸ç™¼äº†ï¼š</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/python-breakpoint-success.png" width="800px" title="Install flask">
</div>
<p>åˆ°é€™é‚Šå°±æˆåŠŸè¨­å®šä¸”æ¸¬è©¦æˆ‘å€‘çš„ Remote Python é–‹ç™¼ç’°å¢ƒäº† ğŸ‘</p>
<h2 id="Trouble-Shooting-ç–‘é›£æ’è§£"><a class="header-anchor" href="#Trouble-Shooting-ç–‘é›£æ’è§£"></a>Trouble Shooting ç–‘é›£æ’è§£</h2>
<p>ç­†è€…åœ¨ä½¿ç”¨<code>Remote - Kubernetes</code> é ç«¯é–‹ç™¼æ™‚ç¶“å¸¸é‡åˆ° <code>Okteto: Up</code> æŒ‡ä»¤å¤±æ•—ã€é€¾æ™‚ï¼Œæˆ–æ˜¯é›–ç„¶æŒ‡ä»¤æˆåŠŸï¼Œå»æ²’æœ‰é€£ä¸Šé ç«¯ç’°å¢ƒç­‰ç‹€æ³ï¼Œé€™æ™‚æœƒéœ€è¦åˆ†æ®µæª¢æŸ¥ç’°å¢ƒå•é¡Œã€‚</p>
<h3 id="å¯èƒ½æ€§ä¸€ï¼šé ç«¯ç’°å¢ƒåŠ-ssh-é€£ç·šæ­£å¸¸ï¼Œåªæ˜¯-VS-Code-æ²’æœ‰è‡ªå‹•é€£ä¸Š"><a class="header-anchor" href="#å¯èƒ½æ€§ä¸€ï¼šé ç«¯ç’°å¢ƒåŠ-ssh-é€£ç·šæ­£å¸¸ï¼Œåªæ˜¯-VS-Code-æ²’æœ‰è‡ªå‹•é€£ä¸Š"></a>å¯èƒ½æ€§ä¸€ï¼šé ç«¯ç’°å¢ƒåŠ ssh é€£ç·šæ­£å¸¸ï¼Œåªæ˜¯ VS Code æ²’æœ‰è‡ªå‹•é€£ä¸Š</h3>
<p>é€™æ™‚å¯ä»¥å…ˆè©¦è‘—ä½¿ç”¨ Remote-SSH é€£å›é ç«¯ã€‚<code>Cmd + Shift + P</code> é–‹å•Ÿ Command Paletteï¼Œé¸æ“‡ <code>Remote-SSH: Connect to Host</code>ï¼š</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/remote-ssh-connect.png" width="400px" title="Install flask">
</div>
<p>å†é¸æ“‡è¦é€£ç·šçš„é ç«¯ç’°å¢ƒï¼š</p>
<div style="width:100%; text-align:center;">
<img src="/blog/2020/06/21/okteto-vscode-python/remote-ssh-select-host.png" width="400px" title="Install flask">
</div>
<h3 id="å¯èƒ½æ€§äºŒï¼šSSH-é€£ç·šå¤±æ•ˆ"><a class="header-anchor" href="#å¯èƒ½æ€§äºŒï¼šSSH-é€£ç·šå¤±æ•ˆ"></a>å¯èƒ½æ€§äºŒï¼šSSH é€£ç·šå¤±æ•ˆ</h3>
<p>è‹¥ç›´æ¥ä½¿ç”¨ Remote-SSH ç„¡æ³•é€£å›é ç«¯ï¼Œå‰‡éœ€ä½¿ç”¨ <code>Okteto: Down</code> Deactivate ç›®å‰ç’°å¢ƒï¼Œå†ç”¨ <code>Okteto: Up</code> é‡é–‹ã€‚æœ‰æ™‚å€™æœƒç™¼ç”Ÿ <code>Okteto: Down</code> é¡¯ç¤ºæˆåŠŸï¼Œä½† <code>Okteto: Up</code> å¤±æ•—çš„ç‹€æ³ï¼Œå¿…é ˆå¤šè·‘å¹¾æ¬¡å¾Œæ‰èƒ½å†æ¬¡ä½¿ç”¨ <code>Okteto: Up</code>ã€‚</p>
<h3 id="å¯èƒ½æ€§ä¸‰ï¼šå…¶ä»–-Okteto-Error"><a class="header-anchor" href="#å¯èƒ½æ€§ä¸‰ï¼šå…¶ä»–-Okteto-Error"></a>å¯èƒ½æ€§ä¸‰ï¼šå…¶ä»– Okteto Error</h3>
<p>Okteto é è¨­æœƒå¯« log é€² <code>~/.okteto/okteto.log</code>ï¼Œå¯ä»¥çœ‹åˆ°è©³ç´°çš„éŒ¯èª¤è¨Šæ¯ï¼Œè¦‹æ‹›æ‹†æ‹›ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail ~&#x2F;.okteto&#x2F;okteto.log</span><br></pre></td></tr></table></figure>
<h2 id="å…¶ä»–è¨­å®šæ–¹å¼"><a class="header-anchor" href="#å…¶ä»–è¨­å®šæ–¹å¼"></a>å…¶ä»–è¨­å®šæ–¹å¼</h2>
<p>æˆ‘è‡ªå·±æ¸¬è©¦æœ‰ä¸€éƒ¨åˆ†çš„å•é¡Œæ˜¯ä¾†è‡ªæ–¼ <code>Remote - Kubernetes</code> é€™å€‹æ’ä»¶æ²’æœ‰æ­£ç¢ºçš„ launch é ç«¯ç’°å¢ƒæˆ–è¨­å®š portã€‚</p>
<p>å¦å¤– <code>Remote - Kubernetes</code> æœ‰å¦ä¸€å€‹å¾ˆå¤§çš„é™åˆ¶æ˜¯ä¸€æ¬¡åªèƒ½ launch ä¸€å€‹é ç«¯é–‹ç™¼ç’°å¢ƒ (GitHub ä¸Šæœ‰ç™¼ç›¸é—œçš„ <a href="https://github.com/okteto/remote-kubernetes/issues/101" target="_blank" rel="noopener">issue</a>)ã€‚æˆ‘è§€å¯Ÿé€™æ˜¯å› ç‚º <code>Okteto: Up</code> é€™å€‹æŒ‡ä»¤åœ¨ command line å¯«æ­»äº† <code>--remote 22100</code>ï¼Œå³ä½¿åœ¨ <code>okteto.yml</code> è¨­å®šäº†åˆ¥çš„ <code>remote</code>ï¼ŒVS Code æ’ä»¶é€™é‚Šä¹Ÿæœƒç›´æ¥ç„¡è¦–ï¼Œå¸Œæœ›ä¹‹å¾Œå®˜æ–¹æœƒè™•ç†é€™å€‹ bugã€‚</p>
<p>å› ç‚ºä¸Šè¿°çš„ç¨®ç¨®ä¸ç©©å•é¡Œï¼Œæˆ‘ç¾åœ¨éƒ½æ˜¯è‡ªå·±åˆ†å…©æ®µè¨­å®šï¼š</p>
<ol>
<li>ç›´æ¥ç”¨ <a href="https://okteto.com/docs/reference/cli/index.html" target="_blank" rel="noopener">Okteto CLI</a>ï¼Œå…ˆåœ¨ terminal ä¸‹  <code>okteto up -f ./okteto.yml</code> ç¢ºå®šç’°å¢ƒæˆåŠŸè·‘èµ·</li>
<li>å†ç”¨ <code>VS Code Remote SSH</code> é€£ä¸Šé ç«¯ç’°å¢ƒï¼ˆä¹Ÿå°±æ˜¯ trouble shooting #1 çš„æ–¹å¼ã€‚ï¼‰</li>
</ol>
<p>å…©æ®µå¼ç”¨æ³•æœ‰ä¸€å€‹æ¯”è¼ƒç›´æ¥çš„ç¼ºé»æ˜¯ï¼Œé€£ä¸Šé ç«¯å¾Œ VS Code ä¸æœƒè‡ªå‹• cd é€² <code>okteto.yml</code> è£¡è¨­å®šçš„ <code>workdir</code>ï¼Œè€Œæ˜¯æœƒé€²åˆ° <code>/root/</code>ï¼Œè¦è‡ªå·±å¾ VS Code Side Bar å†åˆ‡éå»ã€‚</p>
<p>è€Œå‰é¢ä¹Ÿæœ‰èªªéå…¶å¯¦ <code>Remote - Kubernetes</code> å°±æ˜¯ <code>Okteto</code> + <code>Remote-SSH</code>ï¼Œæ‰€ä»¥è‹¥æ¡ç”¨äº†é€™å€‹å…©æ®µå¼ç”¨æ³•ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç›´æ¥ç§»é™¤ <code>Remote - Kubernetes</code> äº† XDDD<br>
<br/></p>
<h2 id="çµèª"><a class="header-anchor" href="#çµèª"></a>çµèª</h2>
<p>æœ¬æ–‡ç°¡å–®ä»‹ç´¹äº†å¦‚ä½•ä½¿ç”¨ Okteto çš„ <code>Remote - Kubernetes</code> VS Code extension ä¾†å»ºç«‹ Kubernetes ä¸­çš„ Python é–‹ç™¼ç’°å¢ƒã€‚</p>
<p>é™¤äº†æœ¬æ–‡ä»‹ç´¹çš„éƒ¨åˆ†ä»¥å¤–ï¼ŒOkteto å…¶å¯¦æœ‰æä¾›äº†æ›´å¤šçš„é¸é …å¯ä»¥è¨­å®šï¼ŒåŒ…å«äº†è¨­å®šç’°å¢ƒè®Šæ•¸ã€é™åˆ¶ resourcesã€è¨­å®šå¤šå€‹ portã€ã€è¨­å®š secrets åŠ PersistentVolume ç­‰ç­‰ï¼Œè©³ç´°å¯ä»¥çœ‹å®˜æ–¹çš„ <a href="https://okteto.com/docs/reference/manifest/index.html" target="_blank" rel="noopener">Manifest Reference</a></p>
<p>é ç«¯é–‹ç™¼å°ç›¸ä¾æ–¼ K8S cluster çš„ application ä¾†èªªç›¸ç•¶æ–¹ä¾¿ï¼Œä½†å› ç‚ºéœ€è¦äº‹å‰è¨­å®šï¼Œæˆ‘è‡ªå·±é–‹ç™¼ API æ™‚é‚„æ˜¯æœƒå…ˆä»¥æœ¬æ©Ÿé–‹ç™¼ + fake data ç‚ºä¸»ï¼Œç›´åˆ°ä¸»è¦é‚è¼¯é–‹ç™¼å®Œç•¢å¾Œæ‰æ”¾ä¸Š development cluster æ¸¬è©¦ï¼Œä¸¦æ­é…ä¸­æ–·é»å¿«é€Ÿä¿®æ­£æ—©æœŸå•é¡Œã€‚ä½†åŒäº‹ä¹Ÿæœ‰äººæ˜¯ä»¥ Remote é–‹ç™¼ç‚ºä¸»ï¼ˆè«‹æ­é… <a href="https://okteto.com/docs/reference/manifest/index.html#persistentvolume-object-optional" target="_blank" rel="noopener">persistentVolume</a> è¨­å®šæœç”¨ï¼Œå¦å‰‡æ¯æ¬¡å…‰ Sync files å°±è¦ç­‰åŠå¤©â€¦ï¼‰ã€‚æœ¬æ©Ÿèˆ‡é ç«¯é–‹ç™¼çš„é¸æ“‡å¾ˆçœ‹å€‹äººåå¥½ï¼Œç”¨çš„é †æ‰‹æœ€é‡è¦å›‰ã€‚</p>
<h2 id="åƒè€ƒè³‡æ–™"><a class="header-anchor" href="#åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2>
<ul>
<li><a href="https://medium.com/okteto/remote-kubernetes-development-in-visual-studio-code-with-okteto-8b96015b41a6" target="_blank" rel="noopener">Remote Kubernetes Development in Visual Studio Code with Okteto (Golang)</a></li>
<li><a href="https://okteto.com/blog/how-to-develop-python-apps-in-kubernetes/" target="_blank" rel="noopener">How to Develop and Debug Python Applications in Kubernetes (using PyCharm)</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=okteto.remote-kubernetes" target="_blank" rel="noopener">VS Code Remote - Kubernetes</a></li>
<li><a href="https://code.visualstudio.com/docs/remote/ssh" target="_blank" rel="noopener">VS Code Remote - SSH</a></li>
<li><a href="https://okteto.com/docs/reference/manifest/index.html" target="_blank" rel="noopener">Okteto Manifest Reference</a></li>
</ul>
</article><ul class="pager blog-pager"><li class="previous"><a href="/blog/2020/07/26/distributed-tracing-1/" data-toggle="tooltip" data-placement="top" title="Observability ä¸‰æœ¬æŸ± - Distributed Tracing ä»‹ç´¹">ä¸Šä¸€ç¯‡</a></li><li class="next"><a href="/blog/2020/06/20/whats-new-in-python-39/" data-toggle="tooltip" data-placement="top" title="Python 3.9 æœ‰å“ªäº›æ–°ç©æ„ï¼Ÿ">ä¸‹ä¸€ç¯‡</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/twoyao" target="_blank" rel="noopener" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li></ul><p class="copyright text-muted">Â© Pei-Ya Chiu â€¢ 2020 â€¢ <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo" target="_blank" rel="noopener">beautiful-hexo</a></p></div></div></div></footer><script src="//cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script><script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/blog/js/main.js"></script><script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-169935405-1', 'auto');
ga('send', 'pageview');</script></body></html>